(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();const _e=(e,t)=>e===t,Pe=Symbol("solid-track"),U={equals:_e};let Ge=we;const T=1,W=2,de={owned:null,cleanups:null,context:null,owner:null};var k=null;let Y=null,Ke=null,S=null,B=null,D=null,j=0;function Z(e,t){const n=S,o=k,s=e.length===0,l=t===void 0?o:t,u=s?de:{owned:null,cleanups:null,context:l?l.context:null,owner:l},r=s?e:()=>e(()=>P(()=>V(u)));k=u,S=null;try{return K(r,!0)}finally{S=n,k=o}}function L(e,t){t=t?Object.assign({},U,t):U;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},o=s=>(typeof s=="function"&&(s=s(n.value)),ge(n,s));return[pe.bind(n),o]}function _(e,t,n){const o=ye(e,t,!1,T);H(o)}function z(e,t,n){n=n?Object.assign({},U,n):U;const o=ye(e,t,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=n.equals||void 0,H(o),pe.bind(o)}function P(e){if(S===null)return e();const t=S;S=null;try{return e()}finally{S=t}}function qe(e){return k===null||(k.cleanups===null?k.cleanups=[e]:k.cleanups.push(e)),e}function pe(){if(this.sources&&this.state)if(this.state===T)H(this);else{const e=B;B=null,K(()=>F(this),!1),B=e}if(S){const e=this.observers?this.observers.length:0;S.sources?(S.sources.push(this),S.sourceSlots.push(e)):(S.sources=[this],S.sourceSlots=[e]),this.observers?(this.observers.push(S),this.observerSlots.push(S.sources.length-1)):(this.observers=[S],this.observerSlots=[S.sources.length-1])}return this.value}function ge(e,t,n){let o=e.value;return(!e.comparator||!e.comparator(o,t))&&(e.value=t,e.observers&&e.observers.length&&K(()=>{for(let s=0;s<e.observers.length;s+=1){const l=e.observers[s],u=Y&&Y.running;u&&Y.disposed.has(l),(u?!l.tState:!l.state)&&(l.pure?B.push(l):D.push(l),l.observers&&ve(l)),u||(l.state=T)}if(B.length>1e6)throw B=[],new Error},!1)),t}function H(e){if(!e.fn)return;V(e);const t=j;Ue(e,e.value,t)}function Ue(e,t,n){let o;const s=k,l=S;S=k=e;try{o=e.fn(t)}catch(u){return e.pure&&(e.state=T,e.owned&&e.owned.forEach(V),e.owned=null),e.updatedAt=n+1,be(u)}finally{S=l,k=s}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?ge(e,o):e.value=o,e.updatedAt=n)}function ye(e,t,n,o=T,s){const l={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:k,context:k?k.context:null,pure:n};return k===null||k!==de&&(k.owned?k.owned.push(l):k.owned=[l]),l}function me(e){if(e.state===0)return;if(e.state===W)return F(e);if(e.suspense&&P(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<j);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===T)H(e);else if(e.state===W){const o=B;B=null,K(()=>F(e,t[0]),!1),B=o}}function K(e,t){if(B)return e();let n=!1;t||(B=[]),D?n=!0:D=[],j++;try{const o=e();return We(n),o}catch(o){n||(D=null),B=null,be(o)}}function We(e){if(B&&(we(B),B=null),e)return;const t=D;D=null,t.length&&K(()=>Ge(t),!1)}function we(e){for(let t=0;t<e.length;t++)me(e[t])}function F(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const o=e.sources[n];if(o.sources){const s=o.state;s===T?o!==t&&(!o.updatedAt||o.updatedAt<j)&&me(o):s===W&&F(o,t)}}}function ve(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=W,n.pure?B.push(n):D.push(n),n.observers&&ve(n))}}function V(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),o=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const l=s.pop(),u=n.observerSlots.pop();o<s.length&&(l.sourceSlots[u]=o,s[o]=l,n.observerSlots[o]=u)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)V(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Fe(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function be(e,t=k){throw Fe(e)}const fe=Symbol("fallback");function ue(e){for(let t=0;t<e.length;t++)e[t]()}function Re(e,t,n={}){let o=[],s=[],l=[],u=[],r=0,g;return qe(()=>ue(l)),()=>{const b=e()||[],w=b.length;return b[Pe],P(()=>{if(w===0)return r!==0&&(ue(l),l=[],o=[],s=[],r=0,u=[]),n.fallback&&(o=[fe],s[0]=Z(x=>(l[0]=x,n.fallback())),r=1),s;for(o[0]===fe&&(l[0](),l=[],o=[],s=[],r=0),g=0;g<w;g++)g<o.length&&o[g]!==b[g]?u[g](()=>b[g]):g>=o.length&&(s[g]=Z(M));for(;g<o.length;g++)l[g]();return r=u.length=l.length=w,o=b.slice(0),s=s.slice(0,r)});function M(x){l[g]=x;const[$,O]=L(b[g]);return u[g]=O,t($,g)}}}let je=!1;function q(e,t){return P(()=>e(t||{}))}const He=e=>`Stale read from <${e}>.`;function Ve(e){const t="fallback"in e&&{fallback:()=>e.fallback};return z(Re(()=>e.each,e.children,t||void 0))}function ce(e){const t=e.keyed,n=z(()=>e.when,void 0,{equals:(o,s)=>t?o===s:!o==!s});return z(()=>{const o=n();if(o){const s=e.children;return typeof s=="function"&&s.length>0?P(()=>s(t?o:()=>{if(!P(n))throw He("Show");return e.when})):s}return e.fallback},void 0,void 0)}function Qe(e,t,n){let o=n.length,s=t.length,l=o,u=0,r=0,g=t[s-1].nextSibling,b=null;for(;u<s||r<l;){if(t[u]===n[r]){u++,r++;continue}for(;t[s-1]===n[l-1];)s--,l--;if(s===u){const w=l<o?r?n[r-1].nextSibling:n[l-r]:g;for(;r<l;)e.insertBefore(n[r++],w)}else if(l===r)for(;u<s;)(!b||!b.has(t[u]))&&t[u].remove(),u++;else if(t[u]===n[l-1]&&n[r]===t[s-1]){const w=t[--s].nextSibling;e.insertBefore(n[r++],t[u++].nextSibling),e.insertBefore(n[--l],w),t[s]=n[l]}else{if(!b){b=new Map;let M=r;for(;M<l;)b.set(n[M],M++)}const w=b.get(t[u]);if(w!=null)if(r<w&&w<l){let M=u,x=1,$;for(;++M<s&&M<l&&!(($=b.get(t[M]))==null||$!==w+x);)x++;if(x>w-r){const O=t[u];for(;r<w;)e.insertBefore(n[r++],O)}else e.replaceChild(n[r++],t[u++])}else u++;else t[u++].remove()}}}function Je(e,t,n,o={}){let s;return Z(l=>{s=l,t===document?e():E(t,e(),t.firstChild?null:void 0,n)},o.owner),()=>{s(),t.textContent=""}}function Q(e,t,n){let o;const s=()=>{const u=document.createElement("template");return u.innerHTML=e,u.content.firstChild},l=()=>(o||(o=s())).cloneNode(!0);return l.cloneNode=l,l}function ae(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function E(e,t,n,o){if(n!==void 0&&!o&&(o=[]),typeof t!="function")return R(e,t,o,n);_(s=>R(e,t(),s,n),o)}function R(e,t,n,o,s){for(;typeof n=="function";)n=n();if(t===n)return n;const l=typeof t,u=o!==void 0;if(e=u&&n[0]&&n[0].parentNode||e,l==="string"||l==="number"){if(l==="number"&&(t=t.toString(),t===n))return n;if(u){let r=n[0];r&&r.nodeType===3?r.data!==t&&(r.data=t):r=document.createTextNode(t),n=N(e,n,o,r)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||l==="boolean")n=N(e,n,o);else{if(l==="function")return _(()=>{let r=t();for(;typeof r=="function";)r=r();n=R(e,r,n,o)}),()=>n;if(Array.isArray(t)){const r=[],g=n&&Array.isArray(n);if(ee(r,t,n,s))return _(()=>n=R(e,r,n,o,!0)),()=>n;if(r.length===0){if(n=N(e,n,o),u)return n}else g?n.length===0?he(e,r,o):Qe(e,n,r):(n&&N(e),he(e,r));n=r}else if(t.nodeType){if(Array.isArray(n)){if(u)return n=N(e,n,o,t);N(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function ee(e,t,n,o){let s=!1;for(let l=0,u=t.length;l<u;l++){let r=t[l],g=n&&n[e.length],b;if(!(r==null||r===!0||r===!1))if((b=typeof r)=="object"&&r.nodeType)e.push(r);else if(Array.isArray(r))s=ee(e,r,g)||s;else if(b==="function")if(o){for(;typeof r=="function";)r=r();s=ee(e,Array.isArray(r)?r:[r],Array.isArray(g)?g:[g])||s}else e.push(r),s=!0;else{const w=String(r);g&&g.nodeType===3&&g.data===w?e.push(g):e.push(document.createTextNode(w))}}return s}function he(e,t,n=null){for(let o=0,s=t.length;o<s;o++)e.insertBefore(t[o],n)}function N(e,t,n,o){if(n===void 0)return e.textContent="";const s=o||document.createTextNode("");if(t.length){let l=!1;for(let u=t.length-1;u>=0;u--){const r=t[u];if(s!==r){const g=r.parentNode===e;!l&&!u?g?e.replaceChild(s,r):e.insertBefore(s,n):g&&r.remove()}else l=!0}}else e.insertBefore(s,n);return[s]}var p=(e=>(e.Dinosaur="ðŸ¦–",e.Blank=" ",e.Block="ðŸ“¦",e.BlockOnMan="ðŸ“¦ðŸ‘¨",e.Man="ðŸ‘¨",e.Water="ðŸ’§",e))(p||{}),Xe=Q("<div class=splash-text>"),Ye=Q("<div class=game-grid>"),Ze=Q("<div class=game-box><h1>Dino Game</h1><header>Level: <!> â€¢ Score: <!> â€¢ Highscore: </header><main></main><footer>Move ðŸ¦– with arrow keys and push ðŸ“¦ on ðŸ‘¨"),ze=Q("<div>");const et=()=>{function l(i,f){return i+Math.floor(Math.random()*(f-i))}const[u,r]=L(-1),[g,b]=L({type:"text",text:"Loading"}),[w,M]=L([]),[x,$]=L(1),[O,te]=L(0),[ne,Se]=L(+(window.localStorage.getItem("highscore")??0)),ke=()=>w().flat(),ie=()=>{const i=w().findIndex(c=>c.find(y=>y===p.Dinosaur)),f=w()[i].findIndex(c=>c===p.Dinosaur);return[i,f]},J=()=>{const i=[];return w().forEach((f,c)=>f.forEach((y,a)=>{[p.Man,p.BlockOnMan].includes(y)&&i.push([c,a,y])})),i};window.addEventListener("keydown",i=>{g().type==="level"&&((i.code==="KeyA"||i.code==="ArrowLeft")&&G(0,-1),(i.code==="KeyD"||i.code==="ArrowRight")&&G(0,1),(i.code==="KeyW"||i.code==="ArrowUp")&&G(-1,0),(i.code==="KeyS"||i.code==="ArrowDown")&&G(1,0))});function se(){window.clearTimeout(u()),r(window.setTimeout(()=>G(0,0),500))}function X(i){$(i),Be(),b({type:"text",text:`Level ${x()}`}),setTimeout(()=>b({type:"level"}),1500)}function Be(){let i=Ce();i=Ae(i),i=xe(i);for(let f=0;f<2**(x()-1);f++)i=Me(i);M(i),se()}function Ae(i,f=4,c=4){for(let y=0;y<f;y++)for(let a=0;a<c;a++)y===f-1||a===c-1?i[y][a]=p.Block:y===Math.floor(f/2)-1&&a===Math.floor(c/2)-1?i[y][a]=p.Dinosaur:i[y][a]=p.Blank;return i}function xe(i){const f=l(1,7);for(let c=0;c<f;c++){const[y,a]=[l(6,48),l(6,38)],d=l(2,7);for(let h=y-d;h<y+d;h++)for(let m=a-d;m<a+d;m++)Math.sqrt((y-h-Math.random())**2+(a-m-Math.random())**2)<=d&&i[h]?.[m]!==void 0&&(i[h][m]=p.Water)}return i}function Me(i){for(;;){const[f,c]=[l(6,40),l(6,50)];if(i[f]?.[c]===p.Blank&&Ee(i,f,c)>10)return i[f][c]=p.Man,i}}function Ee(i,f,c){const y=i[f][c],a=Array.from({length:40},()=>Array(50).fill(!1)),d=(h,m)=>{if(h<0||h>=40||m<0||m>=50||i[h][m]!==y||a[h][m])return 0;a[h][m]=!0;let v=1;return v+=d(h+1,m)+d(h-1,m)+d(h,m+1)+d(h,m-1),v};return d(f,c)}function Ce(){const i=[];for(let f=0;f<40;f++){i[f]=[];for(let c=0;c<50;c++)Math.random()<.5?i[f][c]=p.Block:i[f][c]=p.Blank}return i}function G(i,f){Ie(i,f),Le(),Oe(),Ne(),se()}function Ie(i,f){const[c,y]=ie(),a=y+f,d=c+i;if(a<0||a>=50||d<0||d>=40)return!1;const h=w()[d][a];return h===p.Blank||h===p.Block&&oe(d,a,i,f)?(A(c,y,p.Blank),A(d,a,p.Dinosaur),!0):h===p.Man?(A(c,y,p.Blank),le(),!1):!0}function oe(i,f,c,y){const a=f+y,d=i+c;if(a<0||a>=50||d<0||d>=40)return!1;const h=w()[d][a];return h===p.Blank?(A(i,f,p.Blank),A(d,a,p.Block),!0):h===p.Block?oe(d,a,c,y)?(A(i,f,p.Blank),A(d,a,p.Block),!0):!1:h===p.Man?(A(i,f,p.Blank),A(d,a,p.BlockOnMan),!0):!1}function A(i,f,c){M(y=>{const a=structuredClone(y);return a[i][f]=c,a})}function Le(){J().forEach(([i,f,c])=>De(i,f,c))}function De(i,f,c){const y=c===p.BlockOnMan?p.Block:p.Blank,[a,d]=ie();let[h,m]=Te(i,f,a,d);if(h===void 0){const v=[];w()[i-1]?.[f]===p.Blank&&v.push([i-1,f]),w()[i+1]?.[f]===p.Blank&&v.push([i+1,f]),w()[i]?.[f-1]===p.Blank&&v.push([i,f-1]),w()[i]?.[f+1]===p.Blank&&v.push([i,f+1]),[h,m]=v[Math.floor(Math.random()*v.length)]??[void 0,void 0]}if(h!==void 0&&m!==void 0){const v=w()[h]?.[m]===p.Blank,C=c===p.Man?w()[h]?.[m]===p.Dinosaur:!1;(v||C)&&(A(i,f,y),A(h,m,p.Man),C&&le())}}function Te(i,f,c,y){const a=w().map(d=>d.map(h=>[p.Block,p.Water].includes(h)?"#":1/0));for(a[c][y]=0;;){let d,h,m=1/0;if(a.forEach((v,C)=>v.forEach((I,re)=>{I!=="#"&&$e(a,C,re)&&I<m&&(h=C,d=re,m=I)})),m===1/0)return[void 0,void 0];if(h!==void 0&&d!==void 0){if(h-1===i&&d===f||h+1===i&&d===f||h===i&&d-1===f||h===i&&d+1===f)return[h,d];a[h-1]?.[d]===1/0&&(a[h-1][d]=m+1),a[h+1]?.[d]===1/0&&(a[h+1][d]=m+1),a[h]?.[d-1]===1/0&&(a[h][d-1]=m+1),a[h]?.[d+1]===1/0&&(a[h][d+1]=m+1)}}}function $e(i,f,c){return i[f-1]?.[c]===1/0||i[f+1]?.[c]===1/0||i[f]?.[c-1]===1/0||i[f]?.[c+1]===1/0}function Oe(){J().forEach(([i,f,c])=>{c===p.BlockOnMan&&(A(i,f,p.Block),te(y=>y+10),Se(y=>Math.max(O(),y)),window.localStorage.setItem("highscore",ne().toString()))})}function Ne(){J().length===0&&X(x()+1)}function le(){b({type:"text",text:"Game Over",subtype:"game-over"}),setTimeout(()=>{te(0),X(1)},1500)}return X(1),(()=>{var i=Ze(),f=i.firstChild,c=f.nextSibling,y=c.firstChild,a=y.nextSibling,d=a.nextSibling,h=d.nextSibling;h.nextSibling;var m=c.nextSibling;return i.style.setProperty("--width","50"),i.style.setProperty("--height","40"),E(c,x,a),E(c,O,h),E(c,ne,null),E(m,q(ce,{get when(){return g().type==="text"},get children(){var v=Xe();return E(v,()=>g().text),_(()=>ae(v,"data-subtype",g().subtype)),v}}),null),E(m,q(ce,{get when(){return g().type==="level"},get children(){var v=Ye();return E(v,q(Ve,{get each(){return ke()},children:C=>(()=>{var I=ze();return E(I,C),_(()=>ae(I,"data-cell",C())),I})()})),v}}),null),_(v=>(v=`${x()}`)!=null?i.style.setProperty("--level",v):i.style.removeProperty("--level")),i})()},tt=document.getElementById("root");Je(()=>q(et,{}),tt);
